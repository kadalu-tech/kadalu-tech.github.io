

<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta name="viewport" content="width=device-width"/>
    <meta charSet="utf-8"/>
    <title>Mount a Kadalu Storage Volume</title>
    <link rel="stylesheet" href="/bulma-0.9.4.min.css">
    <link rel="stylesheet" href="/stylesheet.css">
    <link rel="stylesheet" href="/syntax-highlight-emacs.css">
    <script defer src="/alpinejs-3.10.5.min.js"></script>

    <meta name="generator" content="Nanoc 4.12.7">
    
<link href="/favicon.ico" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/favicon.ico" />
<meta name="generator" content="Nanoc 4.12.7">
<meta property="og:title" content="Mount a Kadalu Storage Volume"/>
<meta name="author" content="aravindavk"/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content="Kadalu Storage Volumes can be accessed via Fuse mount, NFS Ganesha, Samba and GFAPI bindings. This blog post describes how to mount a Kadalu Storage Volume using Fuse mount."/>
<meta property="og:description" content="Kadalu Storage Volumes can be accessed via Fuse mount, NFS Ganesha, Samba and GFAPI bindings. This blog post describes how to mount a Kadalu Storage Volume using Fuse mount."/>
<link rel="canonical" href="/blog/mount-kadalu-volume/"/>
<meta property="og:url" content="/blog/mount-kadalu-volume/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2022-11-15"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://kadalu.tech/images/kadalu-storage-mount.png"/>
<meta property="og:image" content="https://kadalu.tech/images/kadalu-storage-mount.png"/>

<meta name="twitter:site" content="https://kadalu.tech"/>
<meta name="twitter:title" content="Mount a Kadalu Storage Volume"/>
<meta name="twitter:description" content="Kadalu Storage Volumes can be accessed via Fuse mount, NFS Ganesha, Samba and GFAPI bindings. This blog post describes how to mount a Kadalu Storage Volume using Fuse mount."/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />


    <script defer data-domain="kadalu.tech" src="https://plausible.io/js/plausible.js"></script>
</head>

    <body>
        <div id="main">
            <nav class="navbar px-4" role="navigation" aria-label="main navigation" x-data="{showing: false}">
  <div class="navbar-brand has-text-left">
      <a class="navbar-item" href="/">
          <img src="/images/logo.svg" alt="Kadalu Technologies" width="300">
    </a>

    <a role="button" class="navbar-burger" aria-label="menu" :class="showing ? 'is-active' : ''" aria-expanded="false" @click="showing = !showing">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div class="navbar-end" x-show="showing">
      <a class="navbar-item" href="/blog">
          Blog
      </a>
      <a class="navbar-item" href="/about">
          About Us
      </a>
  </div>
  <div class="navbar-end is-hidden-touch">
      <a class="navbar-item" href="/blog">
          Blog
      </a>
      <a class="navbar-item" href="/about">
          About Us
      </a>
  </div>
</nav>

            <div class="container is-max-desktop px-4" id="content">
                <div class="has-text-centered py-6">
                    <a href="/">
                        <figure class="image is-64x64" style="margin: auto">
                            <img class="is-rounded" src="https://github.com/aravindavk.png?size=300px">
                        </figure>
                        <p class="has-text-grey pb-6 is-size-6 is-uppercase">Aravinda Vishwanathapura</p>
                    </a>
                </div>

                <div class="">
                    <h1 class="title is-1 has-text-centered">Mount a Kadalu Storage Volume</h1>
                    <div class="has-text-grey mb-1 has-text-centered">
                        Posted on <strong>Nov 15, 2022</strong> by <strong>Aravinda Vishwanathapura</strong>
                    </div>
                    <p class="has-text-centered">
                        <svg class="mr-1 icon is-inline-block" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                        2 minutes read.
                    </p>
                    <div class="content py-6">
                        <div class="paragraph">
<p>Kadalu Storage Volumes can be accessed via <a href="https://www.kernel.org/doc/html/latest/filesystems/fuse.html">Fuse mount</a>, <a href="https://github.com/nfs-ganesha/nfs-ganesha">NFS Ganesha</a>, <a href="https://www.samba.org/">Samba</a> and <a href="https://github.com/gluster/glusterfs/tree/devel/api">GFAPI</a> bindings. This blog post describes how to mount a Kadalu Storage Volume using Fuse mount.</p>
</div>
<div class="paragraph">
<p>This post assumes that Kadalu Storage is already installed and Volume is created (If not, read this <a href="https://kadalu.tech/storage/quick-start/">quick start guide</a>).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/kadalu-storage-mount.png" alt="Mount a Kadalu Storage Volume">
</div>
</div>
<div class="sect1">
<h2 id="_mount_command">Mount Command</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Login to Kadalu Storage by running the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>kadalu user login admin
<span class="go">Password:</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the mount command by giving the Storage Manager URL as below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span><span class="nb">sudo mkdir</span> /mnt/vol1
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>chattr +i /mnt/vol1
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>mount <span class="nt">-t</span> kadalu /PROD/vol1 /mnt/vol1
<span class="go">Executing the following command to mount the Kadalu Storage Volume

/usr/sbin/glusterfs --volfile-id=client-PROD-vol1 --process-name=fuse.kadalu \
   --fs-display-name=kadalu:PROD/vol1 /mnt/vol1 \
   --volfile-server=server1:49252 --volfile-server=server2:49252 --volfile-server=server3:49252</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run <code>df</code> command to verify that Kadalu Storage Volume is mounted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span><span class="nb">df</span> <span class="nt">-h</span> /mnt/vol1
<span class="go">kadalu:PROD/vol1  4.7G  1.8G  3.0G  38% /mnt/vol1</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fstab_based_mount"><code>fstab</code> based mount</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To mount the Volume automatically on node reboot, add entry to fstab.</p>
</div>
<div class="paragraph">
<p>Copy the volfile-server printed in the mount command above and add to <code>/etc/fstab</code> file as below. <strong>Note</strong>: Storage manager URL is not required here.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/PROD/vol1       /mnt/vol1 kadalu  defaults,_netdev,volfile-servers="server1:49252\040server2:49252\040server3:49252"       0       0</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note</strong>: <code>\040</code> is added to give space between volfile servers list.</p>
</div>
<div class="paragraph">
<p>Run <code>mount -a</code> to test if it works.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_systemd_based_mount">Systemd based mount</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a systemd unit file (<code>/etc/systemd/system/mnt-vol1.mount</code>) with the content as below. Uncomment After and Requires section if the Client node is one of the Storage node (If Storage unit process to be started before mounting the volume).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[Unit]
Description=Kadalu Storage Volume mount - vol1
# After=kadalu-mgr.service
# Requires=kadalu-mgr.service

[Mount]
What=/PROD/vol1
Where=/mnt/vol1
Type=kadalu
Options=defaults,_netdev,volfile-servers="server1:49253 server2:49253 server3:49253"

[Install]
WantedBy=multi-user.target</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enable the mount by running</p>
</div>
<div class="listingblock">
<div class="content">
<pre>systemctl enable mnt-vol1.mount
systemctl start mnt-vol1.mount</pre>
</div>
</div>
<div class="paragraph">
<p>Verify the mount by running <code>df</code> command.</p>
</div>
<div class="paragraph">
<p>In our next blog posts, we will discuss using Kadalu Storage Volumes using other access protocols.</p>
</div>
</div>
</div>
                    </div>
                </div>

                <div class="has-text-centered mb-6 notification is-light">
                    <p class="has-text-grey is-uppercase is-size-5 pb-2">About Aravinda Vishwanathapura</p>
                    
                    <p>Co-Founder, CTO - Kadalu Technologies</p>
                    
                    <p>
                        
                        <a class="mr-2" href="https://aravindavk.in">Website</a>|
                        
                        
                        <a class="mx-2" href="https://twitter.com/aravindavk">Twitter</a>|
                        
                        <a class="ml-2" href="https://github.com/aravindavk">Github</a>
                    </p>
                </div>
            </div>

        </div>
        <div class="footer has-background-primary has-text-white mt-6">
    <div class="columns">
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Company</h2>
            <a class="is-block has-text-white" href="/about">About Us</a>
            <a class="is-block has-text-white" href="/blog">Blog Posts</a>
        </div>
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Resources</h2>
            <a class="is-block has-text-white" href="/support">Support</a>
            <a class="is-block has-text-white" href="/security">Security</a>
            <a class="is-block has-text-white" href="/gluster-vs-kadalu">Gluster vs Kadalu</a>
            <a class="is-block has-text-white" href="/storage/quick-start">Kadalu Storage Quick start</a>
        </div>
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Community</h2>
            <a class="is-block has-text-white" target="_blank" href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Community Slack</a>
            <a class="is-block has-text-white" target="_blank" href="https://github.com/kadalu">Github</a>
        </div>

        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Contact Us</h2>
            <a class="is-block has-text-white" href="mailto:hello@kadalu.tech">Email to hello@kadalu.tech</a>
            <a class="is-block has-text-white" href="https://twitter.com/kadalu_tech">Twitter</a>
            <a class="is-block has-text-white" href="https://linkedin.com/kadalu_tech">Linkedin</a>
        </div>
    </div>
    <div class="has-text-centered mt-6">
        Copyright &copy; 2022 Kadalu Technologies Private Limited.
    </div>
</div>

        </div>
    </body>
</html>
