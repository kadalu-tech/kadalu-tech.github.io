

<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta name="viewport" content="width=device-width"/>
    <meta charSet="utf-8"/>
    <title>Gluster FS native NFS and NFS Ganesha</title>
    <link rel="stylesheet" href="/bulma@1.0.0.min.css">
    <link rel="stylesheet" href="/stylesheet.css">
    <link rel="stylesheet" href="/syntax-highlight-emacs.css">
    <script defer src="/alpinejs-3.10.5.min.js"></script>

    <meta name="generator" content="Nanoc 4.12.20">
    
<link href="/favicon.ico" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/favicon.ico" />
<meta name="generator" content="Nanoc 4.12.20">
<meta property="og:title" content="Gluster FS native NFS and NFS Ganesha"/>
<meta name="author" content="aravindavk"/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content="We experimented in our lab and found that we can keep both and let users select the implementation that suits them. Of Course there are limitations with the native NFS implementation, it supports only NFS v3. The improved documentation for gnfs and NFS Ganesha helps the users understand the differences between these two implementations and select the one that suits their workload."/>
<meta property="og:description" content="We experimented in our lab and found that we can keep both and let users select the implementation that suits them. Of Course there are limitations with the native NFS implementation, it supports only NFS v3. The improved documentation for gnfs and NFS Ganesha helps the users understand the differences between these two implementations and select the one that suits their workload."/>
<link rel="canonical" href="/blog/gnfs-and-nfs-ganesha/"/>
<meta property="og:url" content="/blog/gnfs-and-nfs-ganesha/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2024-05-31"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://kadalu.tech/images/gnfs-and-nfs-ganesha.png"/>
<meta property="og:image" content="https://kadalu.tech/images/gnfs-and-nfs-ganesha.png"/>

<meta name="twitter:site" content="https://kadalu.tech"/>
<meta name="twitter:title" content="Gluster FS native NFS and NFS Ganesha"/>
<meta name="twitter:description" content="We experimented in our lab and found that we can keep both and let users select the implementation that suits them. Of Course there are limitations with the native NFS implementation, it supports only NFS v3. The improved documentation for gnfs and NFS Ganesha helps the users understand the differences between these two implementations and select the one that suits their workload."/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />


    <script defer data-domain="kadalu.tech" src="https://plausible.io/js/plausible.js"></script>
</head>

    <body>
        <div id="main">
            <nav class="navbar" role="navigation" aria-label="main navigation" x-data="{showing: false}">
    <div class="navbar-brand" style="min-height: 70px">
        <a class="navbar-item" href="/">
            <img src="/images/logo.svg" style="max-height: 50px"/>
        </a>

        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" :class="showing ? 'is-active' : ''" @click="showing = !showing" data-target="navbarBasicExample">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu" :class="showing ? 'is-active' : ''">
        <div class="navbar-end">
            <a class="navbar-item" href="/blog">
                Blog
            </a>

            <a class="navbar-item" href="/pricing">
                Pricing
            </a>

            <a class="navbar-item" href="/about">
                About Us
            </a>
        </div>
    </div>
    </div>
</nav>

            <div class="container is-max-desktop px-4" id="content">
                <div class="has-text-centered py-6">
                    <a href="/">
                        <figure class="image is-64x64" style="margin: auto">
                            <img class="is-rounded" src="https://github.com/aravindavk.png?size=300px">
                        </figure>
                        <p class="has-text-grey pb-6 is-size-6 is-uppercase">Aravinda VK</p>
                    </a>
                </div>

                <div class="">
                    <h1 class="title is-1 has-text-centered">Gluster FS native NFS and NFS Ganesha</h1>
                    <div class="has-text-grey mb-1 has-text-centered">
                        Posted on <strong>May 31, 2024</strong> by <strong>Aravinda VK</strong>
                    </div>
                    <p class="has-text-centered">
                        <span class="icon-text">
                            <svg class="mr-1 icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                            <span><strong>3 minutes</strong> read.</span>
                        </span>
                    </p>
                    <div class="content py-6">
                        <div class="paragraph">
<p>Gluster FS Native NFS server implementation was disabled since NFS Ganesha integration supported both NFS v3/v4 and to avoid confusion to users.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/gnfs-and-nfs-ganesha.png" alt="Gnfs and NFS Ganesha">
</div>
</div>
<div class="paragraph">
<p>Many users requested in the past to enable native NFS because of the complexities involved with NFS Ganesha. Since Gluster FS supports multiple access protocols why not support native NFS?</p>
</div>
<div class="paragraph">
<p>We experimented in our lab and found that we can keep both and let users select the implementation that suits them. Of Course, there are limitations with the native NFS implementation, it supports only NFS v3. The improved documentation for gnfs and NFS Ganesha helps the users understand the differences between these two implementations and select the one that suits their workload.</p>
</div>
<div class="sect1">
<h2 id="_implementation_details">Implementation details</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_native_nfs_gnfs">Native NFS (gnfs)</h3>
<div class="paragraph">
<p>Native NFS is implemented as an xlator(Gluster FS module), when the glusterfs process starts with the Volfile (Volume config file) with the necessary NFS-related configuration, then the Gluster FS process speaks NFS! All these are handled by Glusterd and NFS export can be enabled or disabled using the volume set option.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>gluster volume set vol1 nfs.disable off</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nfs_ganesha">NFS Ganesha</h3>
<div class="paragraph">
<p>NFS Ganesha is a third-party server that supports both NFSv3 and v4 and provides a framework(File System Abstraction Layer(FSAL) ) to integrate with any backend file system/storage. Gluster FS provides the FSAL plugin using libgfapi and is integrated with NFS Ganesha. NFS Ganesha accepts the requests from NFS clients and then uses the FSAL layer to transform the request into file system calls.</p>
</div>
<div class="paragraph">
<p>Add the Gluster FS volume details to the NFS Ganesha configuration file to export a Gluster volume as NFS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faqs">FAQs:</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Is it possible to export a volume as both gnfs and NFS Ganesha?</strong>
Yes. Technically this works but may not be useful since NFS Ganesha alone can support NFSv3/v4. It is not possible to run native NFS and NFS Ganesha services in the same server since both use the same ports. Export the volume as NFS Ganesha export from a server outside the Cluster and use gnfs using the volume set option.</p>
</li>
<li>
<p><strong>Will enabling the gnfs cause issues for NFS Ganesha integration?</strong>
No. gnfs is implemented as a xlator and that will not be included in regular volume mounts or the mount (libgfapi mount) used by NFS Ganesha FSAL. Gnfs is run as a separate process with its own volume config file (See below ps command output)</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>ps ax | <span class="nb">grep </span>gluster/nfs
<span class="go"> 841693 ?    	SLsl   0:01 /usr/sbin/glusterfs -s localhost --volfile-id gluster/nfs -p /var/run/gluster/nfs/nfs.pid -l /var/log/glusterfs/nfs.log -S /var/run/gluster/335fab3904fdd095.socket</span></code></pre>
</div>
</div>
</li>
<li>
<p><strong>Will I face any stability issues with gnfs?</strong>
Gnfs tests in upstream CI is not disabled, so it is tested for many use cases. However, fixing the issues for this module may be slow compared to NFS Ganesha issues. Many users prefer using gnfs for its simplicity.</p>
</li>
<li>
<p><strong>Where can I get the Gluster FS packages with gnfs enabled?</strong>
Kadalu Technologies will provide the premium packages with gfs enabled. See the <a href="https://kadalu.tech/pricing">pricing page</a> for more details or write to us at <a href="mailto:hello@kadalu.tech">hello@kadalu.tech</a>.</p>
</li>
</ul>
</div>
</div>
</div>
                    </div>
                </div>

                <div class="has-text-centered mb-6 notification is-light">
                    <p class="has-text-grey is-uppercase is-size-5 pb-2">About Aravinda VK</p>
                    
                    <p class="mb-4">Co-Founder, CTO - Kadalu Technologies</p>
                    
                    <p>
                        
                        <a class="mr-2" href="https://aravindavk.in">Website</a>|
                        
                        
                        <a class="mx-2" href="https://twitter.com/aravindavk">Twitter</a>|
                        
                        <a class="ml-2" href="https://github.com/aravindavk">Github</a>
                    </p>
                </div>
            </div>

        </div>
        <div class="footer has-background-info-25 has-text-white pt-6">
    <div class="columns">
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Company</h2>
            <a class="is-block has-text-white" href="/about">About Us</a>
            <a class="is-block has-text-white" href="/blog">Blog Posts</a>
        </div>
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Resources</h2>
            <a class="is-block has-text-white" href="/support">Support</a>
            <a class="is-block has-text-white" href="/security">Security</a>
            <a class="is-block has-text-white" href="/storage/quick-start">Gluster FS Quick start</a>
        </div>
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Community</h2>
            <a class="is-block has-text-white" target="_blank" href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Community Slack</a>
            <a class="is-block has-text-white" target="_blank" href="https://github.com/kadalu">Github</a>
        </div>

        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Contact Us</h2>
            <a class="is-block has-text-white" href="mailto:hello@kadalu.tech">Email to hello@kadalu.tech</a>
            <a class="is-block has-text-white" href="https://twitter.com/kadalu_tech">Twitter</a>
            <a class="is-block has-text-white" href="https://linkedin.com/kadalu_tech">Linkedin</a>
        </div>
    </div>
    <div class="has-text-centered mt-6">
        Copyright &copy; 2019-2024 Kadalu Technologies Private Limited.
    </div>
</div>

        </div>
    </body>
</html>
