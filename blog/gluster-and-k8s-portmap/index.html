

<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta name="viewport" content="width=device-width"/>
    <meta charSet="utf-8"/>
    <title>Gluster and Kubernetes - Portmap</title>
    <link rel="stylesheet" href="/bulma-0.9.4.min.css">
    <link rel="stylesheet" href="/stylesheet.css">
    <link rel="stylesheet" href="/syntax-highlight-emacs.css">
    <script defer src="/alpinejs-3.10.5.min.js"></script>

    <meta name="generator" content="Nanoc 4.12.7">
    
<link href="/favicon.ico" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/favicon.ico" />
<meta name="generator" content="Nanoc 4.12.7">
<meta property="og:title" content="Gluster and Kubernetes - Portmap"/>
<meta name="author" content="aravindavk"/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content="If we remove Glusterd in k8s setup, who will do the role of Glusterd? How will the brick process get the port number?"/>
<meta property="og:description" content="If we remove Glusterd in k8s setup, who will do the role of Glusterd? How will the brick process get the port number?"/>
<link rel="canonical" href="/blog/gluster-and-k8s-portmap/"/>
<meta property="og:url" content="/blog/gluster-and-k8s-portmap/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-07-09"/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content="https://kadalu.tech/images/logo-icon-spaced.png"/>
<meta property="og:image" content="https://kadalu.tech/images/logo-icon-spaced.png"/>

<meta name="twitter:site" content="https://kadalu.tech"/>
<meta name="twitter:title" content="Gluster and Kubernetes - Portmap"/>
<meta name="twitter:description" content="If we remove Glusterd in k8s setup, who will do the role of Glusterd? How will the brick process get the port number?"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />


    <script defer data-domain="kadalu.tech" src="https://plausible.io/js/plausible.js"></script>
</head>

    <body>
        <div id="main">
            <nav class="navbar px-4" role="navigation" aria-label="main navigation" x-data="{showing: false}">
  <div class="navbar-brand has-text-left">
      <a class="navbar-item" href="/">
          <img src="/images/logo.svg" alt="Kadalu Technologies" width="300">
    </a>

    <a role="button" class="navbar-burger" aria-label="menu" :class="showing ? 'is-active' : ''" aria-expanded="false" @click="showing = !showing">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div class="navbar-end" x-show="showing">
      <a class="navbar-item" href="/blog">
          Blog
      </a>
      <a class="navbar-item" href="/about">
          About Us
      </a>
  </div>
  <div class="navbar-end is-hidden-touch">
      <a class="navbar-item" href="/blog">
          Blog
      </a>
      <a class="navbar-item" href="/about">
          About Us
      </a>
  </div>
</nav>

            <div class="container is-max-desktop px-4" id="content">
                <div class="has-text-centered py-6">
                    <a href="/">
                        <figure class="image is-64x64" style="margin: auto">
                            <img class="is-rounded" src="https://github.com/aravindavk.png?size=300px">
                        </figure>
                        <p class="has-text-grey pb-6 is-size-6 is-uppercase">Aravinda Vishwanathapura</p>
                    </a>
                </div>

                <div class="">
                    <h1 class="title is-1 has-text-centered">Gluster and Kubernetes - Portmap</h1>
                    <div class="has-text-grey mb-1 has-text-centered">
                        Posted on <strong>Jul 9, 2019</strong> by <strong>Aravinda Vishwanathapura</strong>
                    </div>
                    <p class="has-text-centered">
                        <span class="icon-text">
                            <svg class="mr-1 icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                            <span><strong>1 minute</strong> read.</span>
                        </span>
                    </p>
                    <div class="content py-6">
                        <div class="notification is-info is-light">
    This blog was first published on <a href="https://aravindavk.in/blog/gluster-and-k8s-portmap">Aravinda Vishwanathapura's Website</a>.
</div>
<div class="paragraph">
<p>One of the primary roles of Glusterd is to allocate a port for brick
processes and let the clients know about it when requested.</p>
</div>
<div class="paragraph">
<p>Glusterd starts a brick process, and it allocates a free port number
between 49152-49664. Gluster client(or mount) will connect to Glusterd
(port:24007) and asks for the brick port, Glusterd provides brick port
and client then connects to the brick process.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/gluster-glusterd-brick-port.png" alt="Get brick port from Glusterd">
</div>
</div>
<div class="paragraph">
<p>If we remove Glusterd in k8s setup, who will do the role of Glusterd?
How will the brick process get the port number?</p>
</div>
<div class="paragraph">
<p>Now comes the Magic! All brick processes will run with the port number
24007!</p>
</div>
<div class="paragraph">
<p>Each brick is one container in k8s setup, so no need to search for a new
port. Just use 24007. Gluster client is intelligent enough to know
that the connecting process is Glusterd or Brick process. The client
connects to 24007 to get brick port, and it finds the brick process
itself.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/gluster-brick-connect-direct.png" alt="Client directly connects to brick">
</div>
</div>
<div class="paragraph">
<p>Found interesting? Do join our talk about <a href="http://bit.ly/gluster-k8s-devconf">Managing Gluster in Kubernetes without using Glusterd/Glusterd2</a> at the devconf India event.</p>
</div>
                    </div>
                </div>

                <div class="has-text-centered mb-6 notification is-light">
                    <p class="has-text-grey is-uppercase is-size-5 pb-2">About Aravinda Vishwanathapura</p>
                    
                    <p class="mb-4">Co-Founder, CTO - Kadalu Technologies</p>
                    
                    <p>
                        
                        <a class="mr-2" href="https://aravindavk.in">Website</a>|
                        
                        
                        <a class="mx-2" href="https://twitter.com/aravindavk">Twitter</a>|
                        
                        <a class="ml-2" href="https://github.com/aravindavk">Github</a>
                    </p>
                </div>
            </div>

        </div>
        <div class="footer has-background-primary has-text-white pt-6">
    <div class="columns">
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Company</h2>
            <a class="is-block has-text-white" href="/about">About Us</a>
            <a class="is-block has-text-white" href="/blog">Blog Posts</a>
        </div>
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Resources</h2>
            <a class="is-block has-text-white" href="/support">Support</a>
            <a class="is-block has-text-white" href="/security">Security</a>
            <a class="is-block has-text-white" href="/gluster-vs-kadalu">Gluster vs Kadalu</a>
            <a class="is-block has-text-white" href="/storage/quick-start">Kadalu Storage Quick start</a>
        </div>
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Community</h2>
            <a class="is-block has-text-white" target="_blank" href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Community Slack</a>
            <a class="is-block has-text-white" target="_blank" href="https://github.com/kadalu">Github</a>
        </div>

        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Contact Us</h2>
            <a class="is-block has-text-white" href="mailto:hello@kadalu.tech">Email to hello@kadalu.tech</a>
            <a class="is-block has-text-white" href="https://twitter.com/kadalu_tech">Twitter</a>
            <a class="is-block has-text-white" href="https://linkedin.com/kadalu_tech">Linkedin</a>
        </div>
    </div>
    <div class="has-text-centered mt-6">
        Copyright &copy; 2022 Kadalu Technologies Private Limited.
    </div>
</div>

        </div>
    </body>
</html>
